<suki:SukiWindow xmlns="https://github.com/avaloniaui"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:vm="using:FocusTime.ViewModels"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:suki="https://github.com/kikipoulet/SukiUI"
                 mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="500"
                 x:Class="FocusTime.Views.SettingsWindow"
                 x:DataType="vm:SettingsViewModel"
                 Title="设置"
                 Width="500"
                 Height="600"
                 MinWidth="450"
                 MinHeight="550"
                 WindowStartupLocation="CenterOwner"
                 Icon="/Assets/avalonia-logo.ico">

    <Design.DataContext>
        <vm:SettingsViewModel/>
    </Design.DataContext>

    <ScrollViewer Padding="20">
            <StackPanel Spacing="25">
                <!-- 标题 -->
                <TextBlock Text="设置" 
                           FontSize="24" 
                           FontWeight="Bold" 
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>
                
                <!-- 时间设置 -->
                <suki:GlassCard Padding="20" Margin="0,10">
                    <StackPanel Spacing="20">
                        <TextBlock Text="时间设置" 
                                   FontSize="20" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333"/>
                        
                        <Grid ColumnDefinitions="*,Auto,80">
                            <TextBlock Text="专注时间" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <Slider Grid.Column="1" 
                                    Value="{Binding Settings.FocusMinutes}" 
                                    Minimum="1" 
                                    Maximum="60" 
                                    Width="200"
                                    Margin="20,0"/>
                            <TextBlock Grid.Column="2" 
                                       Text="{Binding Settings.FocusMinutes, StringFormat='{}{0} 分钟'}" 
                                       FontSize="14" 
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       Foreground="#FF6B47"
                                       FontWeight="SemiBold"/>
                        </Grid>
                        
                        <Grid ColumnDefinitions="*,Auto,80">
                            <TextBlock Text="短休息时间" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <Slider Grid.Column="1" 
                                    Value="{Binding Settings.ShortBreakMinutes}" 
                                    Minimum="1" 
                                    Maximum="30" 
                                    Width="200"
                                    Margin="20,0"/>
                            <TextBlock Grid.Column="2" 
                                       Text="{Binding Settings.ShortBreakMinutes, StringFormat='{}{0} 分钟'}" 
                                       FontSize="14" 
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       Foreground="#FF6B47"
                                       FontWeight="SemiBold"/>
                        </Grid>
                        
                        <Grid ColumnDefinitions="*,Auto,80">
                            <TextBlock Text="长休息时间" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <Slider Grid.Column="1" 
                                    Value="{Binding Settings.LongBreakMinutes}" 
                                    Minimum="5" 
                                    Maximum="60" 
                                    Width="200"
                                    Margin="20,0"/>
                            <TextBlock Grid.Column="2" 
                                       Text="{Binding Settings.LongBreakMinutes, StringFormat='{}{0} 分钟'}" 
                                       FontSize="14" 
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       Foreground="#FF6B47"
                                       FontWeight="SemiBold"/>
                        </Grid>
                        
                        <Grid ColumnDefinitions="*,Auto,80">
                            <TextBlock Text="长休息间隔" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <Slider Grid.Column="1" 
                                    Value="{Binding Settings.SessionsUntilLongBreak}" 
                                    Minimum="2" 
                                    Maximum="8" 
                                    Width="200"
                                    Margin="20,0"/>
                            <TextBlock Grid.Column="2" 
                                       Text="{Binding Settings.SessionsUntilLongBreak, StringFormat='{}{0} 轮'}" 
                                       FontSize="14" 
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       Foreground="#FF6B47"
                                       FontWeight="SemiBold"/>
                        </Grid>
                    </StackPanel>
                </suki:GlassCard>
                
                <!-- 自动化设置 -->
                <suki:GlassCard Padding="20" Margin="0,10">
                    <StackPanel Spacing="15">
                        <TextBlock Text="自动化" 
                                   FontSize="20" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333"/>
                        
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBlock Text="自动开始休息" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <ToggleSwitch Grid.Column="1" 
                                          IsChecked="{Binding Settings.AutoStartBreaks}"/>
                        </Grid>
                        
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBlock Text="自动开始专注" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <ToggleSwitch Grid.Column="1" 
                                          IsChecked="{Binding Settings.AutoStartFocus}"/>
                        </Grid>
                    </StackPanel>
                </suki:GlassCard>
                
                <!-- 通知设置 -->
                <suki:GlassCard Padding="20" Margin="0,10">
                    <StackPanel Spacing="15">
                        <TextBlock Text="通知与音效" 
                                   FontSize="20" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333"/>
                        
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBlock Text="启用音效" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <ToggleSwitch Grid.Column="1" 
                                          IsChecked="{Binding Settings.SoundEnabled}"/>
                        </Grid>
                        
                        <Grid ColumnDefinitions="*,Auto,80" IsEnabled="{Binding Settings.SoundEnabled}">
                            <TextBlock Text="音量" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <Slider Grid.Column="1" 
                                    Value="{Binding Settings.SoundVolume}" 
                                    Minimum="0" 
                                    Maximum="1" 
                                    Width="200"
                                    Margin="20,0"/>
                            <TextBlock Grid.Column="2" 
                                       Text="{Binding Settings.SoundVolume, StringFormat='{}{0:P0}'}" 
                                       FontSize="14" 
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       Foreground="#FF6B47"
                                       FontWeight="SemiBold"/>
                        </Grid>
                        
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBlock Text="桌面通知" 
                                       FontSize="16" 
                                       VerticalAlignment="Center" 
                                       Foreground="#666"/>
                            <ToggleSwitch Grid.Column="1" 
                                          IsChecked="{Binding Settings.NotificationsEnabled}"/>
                        </Grid>
                    </StackPanel>
                </suki:GlassCard>
                
                <!-- 按钮 -->
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center" 
                            Spacing="20"
                            Margin="0,10,0,0">
                    <Button Content="重置默认" 
                            Padding="20,10"
                            Command="{Binding ResetToDefaultsCommand}"/>
                    <Button Content="确定" 
                            Classes="Primary"
                            Padding="20,10"
                            Command="{Binding SaveAndCloseCommand}"/>
                </StackPanel>
            </StackPanel>
    </ScrollViewer>
</suki:SukiWindow>